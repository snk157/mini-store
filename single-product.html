<!DOCTYPE html>
<html>
  <head>
    <title>Ministore</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="description" content="">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@9/swiper-bundle.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@300;400;500&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!-- script ================================================== -->
    <script>
      const urlParams = new URLSearchParams(window.location.search);
      const id = urlParams.get('productId');

      function loadHeaderFooter()
      {
        // Fetch and insert header content
        fetch('header.html')
          .then(response => response.text())
          .then(data => {
            document.getElementById('header-container').innerHTML = data;
          });

        // Fetch and insert footer content
        fetch('footer.html')
          .then(response => response.text())
          .then(data => {
            document.getElementById('footer-container').innerHTML = data;
          });
      }

      async function loadProduct()
      {
        let productName = document.getElementById("product_name");
        let description = document.getElementById("description");
        let price = document.getElementById("price");
        
        let product = await axios.get(`https://mini-store-api-ud3r.onrender.com/product/${id}`);
        productName.innerHTML = product.data.data.product_name;
        description.innerHTML = product.data.data.product_name;
        price.innerHTML = product.data.data.product_name;
      }

      function addToCart() {
        const userToken = localStorage.getItem('userToken');
        if (!userToken || userToken == null || userToken == "")
        {
          alert('Please log in to add items to your cart.');
          window.location.href = `${window.location.origin}/login.html`;
          return;
        }

        axios.post("https://mini-store-api-ud3r.onrender.com/products", { id }, {
          headers: {
            Authorization: `Bearer ${userToken}`,
          },
        })
        .then(response => {
          window.location.href = `${window.location.origin}/cart.html`;
        })
        .catch(error => {
          console.error('Error adding product to cart:', error);
          alert('Failed to add product to cart. Please try again.');
        });
      }

      // Call function to load header and footer
      window.onload = function () {
        loadHeaderFooter();
        loadProduct();
      };
    </script>
    <!-- script ================================================== -->
    <script src="js/modernizr.js"></script>
  </head>
  <div id="header-container"></div>
    <section id="selling-product" class="single-product padding-xlarge">
      <div class="container mt-5">
        <div class="row">
          <!-- Product Image -->
          <div class="col-lg-6 text-center">
            <div class="product-preview">
              <img src="images/singel-product-item.jpg" alt="Product Image" class="img-fluid rounded shadow-sm">
            </div>
          </div>
      
          <!-- Product Details -->
          <div class="col-lg-6">
            <div class="product-info">
              <!-- Product Title and Rating -->
              <div class="element-header mb-4">
                <h1 id="product_name" itemprop="name" class="display-5 fw-bold text-uppercase">Product Name</h1>
                <div class="rating-container d-flex align-items-center mt-2">
                  <svg class="star star-fill text-warning me-2" width="20" height="20">
                    <use xlink:href="#star-fill"></use>
                  </svg>
                  <span class="rating-count fs-5 fw-bold text-muted">5.0</span>
                </div>
              </div>
      
              <!-- Product Price -->
              <div class="product-price my-4">
                <strong id="price" class="text-primary display-6 fw-bold">$870.00</strong>
              </div>
      
              <!-- Product Description -->
              <p id="description" class="text-muted fs-5">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque auctor vitae nisi nec gravida.
              </p>
      
              <!-- Stock Information -->
              <div class="product-quantity my-4">
                <span class="text-dark fs-6 fw-semibold">2 in stock</span>
              </div>
      
              <!-- Quantity Selector -->
              <div class="input-group product-qty mb-4">
                <button class="btn btn-outline-secondary quantity-left-minus" type="button" data-type="minus">-</button>
                <input type="text" id="quantity" class="form-control text-center" value="1" min="1" max="100" readonly>
                <button class="btn btn-outline-secondary quantity-right-plus" type="button" data-type="plus">+</button>
              </div>
      
              <!-- Add to Cart Button -->
              <div class="d-flex align-items-center">
                <button type="submit" class="btn btn-primary btn-lg text-uppercase flex-grow-1" onclick="">Add to Cart</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
   <div id="footer-container"></div>
    <script src="js/jquery-1.11.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper/swiper-bundle.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="js/plugins.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
  </body>
</html>